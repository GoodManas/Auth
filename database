CREATE DATABASE IF NOT EXISTS go
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

USE go;

-- Создание таблицы ролей
CREATE TABLE IF NOT EXISTS roles (
    id_role INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    description VARCHAR(255)
);

-- Создание таблицы пользователей
CREATE TABLE IF NOT EXISTS users (
    id_users INT AUTO_INCREMENT PRIMARY KEY,
    id_role INT,
    login VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    FOREIGN KEY (id_role) REFERENCES roles(id_role)
);

-- Вставка базовых ролей
INSERT INTO roles (name, description) VALUES 
('admin', 'Полный доступ к системе'),
('user', 'Обычный пользователь'),
('manager', 'Менеджер с ограниченными правами');

-- Вставка тестовых пользователей
INSERT INTO users (id_role, login, password) VALUES 
(1, '1', '1'),
(2, '2', '2'),
(3, '3', '3');

-- Создание таблицы товаров
CREATE TABLE IF NOT EXISTS products (
    id_product INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    quantity INT NOT NULL DEFAULT 0,
    category VARCHAR(100),
    manufacturer VARCHAR(200),
    article VARCHAR(50) UNIQUE,
    is_available BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Добавляем тестовые товары (ИСПРАВЛЕНО)
INSERT INTO products (name, description, price, quantity, category, manufacturer, article, is_available) VALUES
('Ноутбук ASUS ROG', 'Игровой ноутбук с RTX 3060, 16GB RAM, 512GB SSD', 75000.00, 10, 'Ноутбуки', 'ASUS', 'ROG-001', TRUE),
('Ноутбук HP Pavilion', 'Для работы и учебы, 8GB RAM, 256GB SSD', 45000.00, 15, 'Ноутбуки', 'HP', 'HP-002', TRUE),
('Мышь Logitech G502', 'Игровая мышь с подсветкой, 7 кнопок', 3500.00, 50, 'Мыши', 'Logitech', 'LOG-502', TRUE),
('Мышь Xiaomi', 'Беспроводная тихая мышь', 1200.00, 100, 'Мыши', 'Xiaomi', 'XIA-001', TRUE),
('Клавиатура Bloody', 'Механическая клавиатура с подсветкой', 4500.00, 30, 'Клавиатуры', 'Bloody', 'BLD-001', TRUE),
('Монитор Samsung', '27" 4K IPS монитор', 32000.00, 8, 'Мониторы', 'Samsung', 'SAM-27', TRUE),  -- БЫЛА ОШИБКА: лишняя кавычка
('Наушники HyperX', 'Игровые наушники с микрофоном', 5500.00, 25, 'Наушники', 'HyperX', 'HYP-001', TRUE),
('SSD Samsung 1TB', 'Внутренний SSD накопитель', 8900.00, 20, 'Комплектующие', 'Samsung', 'SSD-001', TRUE),
('Оперативная память', 'DDR4 16GB 3200MHz', 6500.00, 40, 'Комплектующие', 'Kingston', 'RAM-001', TRUE),
('Принтер HP LaserJet', 'Лазерный принтер ч/б', 12500.00, 5, 'Принтеры', 'HP', 'PRN-001', TRUE);

-- Проверка данных
SELECT * FROM users;
SELECT * FROM products;
SELECT * FROM roles;

drop database go;